name: TEST_CI

on:
  push:
    branches: [ ci-test ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v2
    - uses: actions/setup-node@v1
      with:
        node-version: '12.x'

    - run: yarn install
    - run: yarn add --dev alfa-ui-primitives@latest
    - run: yarn generate
    
    - name: commit changes
      uses: actions/commit@v2.5
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        push-branch: 'ci-test'
        commit-message: 'feat(*): add new icons'
        force-add: 'false'
        files: .
        name: dmitrsavk
        email: dmitrsavk@yandex.ru
    
    #- name: git commit new components
    #  run: git add . && git commit -m "add new icons"
    
    #- name: lerna up versions
    #  run: lerna version minor --no-push --yes
    
    #- name: yarn build
    #  run: yarn build

    #- name: lerna publish
     # run: lerna publish from-git --contents dist

    #- name: yarn publish root package
    #  run: yarn publish dist --no-git-tag-version

   # - name: copy package.json
   #   run: cp dist/package.json package.json

   # - name: commit and push changes
    #  run: git add package.json && git commit -m 'update version' && git push && git push --tags
    
